<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.furnature.mapper.OnedayMapper">
	<select id="onedayList" parameterType="hashmap" resultType="com.example.furnature.model.Oneday">
		SELECT * FROM TBL_CLASS C
		INNER JOIN TBL_ONEDAYFILE O
		ON C.CLASS_NO = O.CLASS_NO
	</select>
	
	<select id="onedayDetail" parameterType="hashmap" resultType="com.example.furnature.model.Oneday">
		SELECT * FROM TBL_CLASS C
		INNER JOIN TBL_ONEDAYFILE O
		ON C.CLASS_NO = O.CLASS_NO
		WHERE C.CLASS_NO = #{classNo}
	</select>

	<insert id="onedayPay" parameterType="hashmap">
		INSERT INTO TBL_PARTICIPANT (PAY_ID, USER_NAME, USER_ID, COUNT, PRICE, PAY_DAY, CLASS_NO) VALUES (#{payId}, #{name}, 'user1', 1, #{price}, SYSDATE, #{classNo})
	</insert>
	
	<insert id="onedayReg" parameterType="hashmap">
		INSERT INTO TBL_CLASS (CLASS_NO, CLASS_NAME, PRICE, HEAD_COUNT, CLASS_DATE, START_DAY, END_DAY)
		VALUES (#{classNo}, #{className}, #{price}, #{headCount}, #{classDate}, #{startDay}, #{endDay})
	</insert>
	
	<insert id="onedayThumb" parameterType="hashmap">
		INSERT INTO TBL_ONEDAYFILE (FILE_NAME, FILE_PATH, FILE_SIZE, EXT_NAME, CLASS_NO, FILE_NO)
		VALUES (#{fileName}, #{filePath}, #{fileSize}, #{extName}, #{classNo}, FILE_NO_SEQ.NEXTVAL)
	</insert>
	
	<select id="classNo" parameterType="hashmap" resultType="int">
		SELECT MAX(CLASS_NO) +1 FROM TBL_CLASS
	</select>

	
</mapper>	